spring.application.name=xa-transaction

server.port=8090

########################################
# Solace JMS (XA) connection settings
########################################
# Solace broker host (smf or smfs)
solace.host=smf://localhost:15555
# Message VPN name
solace.vpn=default
# Client username/password (must allow transacted sessions / XA)
solace.username=default
solace.password=default

########################################
# Narayana JTA Settings (Snowdrop starter)
# me.snowdrop:narayana-spring-boot-starter
########################################
narayana.log-dir=./transaction-logs
narayana.node-identifier=solace-xa-node-1
narayana.default-timeout=300

# Let Narayana manage the pooled XA DataSource for JDBC as well
# (H2 DataSource org.h2.jdbcx.JdbcDataSource is XA-capable)  [oai_citation:1?H2 Database](https://www.h2database.com/javadoc/org/h2/jdbcx/JdbcDataSource.html?utm_source=chatgpt.com)
narayana.dbcp.enabled=true

########################################
# H2 Database (XA-participating via Narayana)
########################################
spring.datasource.url=jdbc:h2:mem:txdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;TRACE_LEVEL_SYSTEM_OUT=2
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# Run schema.sql on startup to create TX_LOG table  [oai_citation:2?Baeldung on Kotlin](https://www.baeldung.com/spring-boot-h2-database?utm_source=chatgpt.com)
spring.sql.init.mode=always
spring.sql.init.platform=h2

# Optional: H2 web console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

########################################
# Spring JMS defaults (Pub/Sub)
########################################
spring.jms.pub-sub-domain=true
#spring.jms.listener.acknowledge-mode=transacted

########################################
# Hibernate / JPA (only if you also add JPA later)
# These help Hibernate work with JTA (Narayana) if you enable JPA.  [oai_citation:3?JBoss Developer](https://developer.jboss.org/thread/279633?utm_source=chatgpt.com)
########################################
# spring.jpa.properties.hibernate.jta.allowTransactionAccess=true
# spring.jpa.properties.hibernate.current_session_context_class=jta

logging.level.com.arjuna=DEBUG
logging.level.org.jboss.narayana=DEBUG
logging.level.org.jboss.narayana.jta=DEBUG
logging.level.org.springframework.transaction=DEBUG
logging.level.org.springframework.jms=DEBUG
logging.level.org.springframework.jdbc=DEBUG